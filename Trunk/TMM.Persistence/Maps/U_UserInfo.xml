<?xml version="1.0" encoding="utf-8" ?> 
<!--============================================================================
//	CAUTION: This file is generated by IBatisNetGen.BatisMap.cst at 2010-12-17 15:46:12
//				By xincai.wu
//===========================================================================-->
<sqlMap namespace="U_UserInfo"
	xmlns="http://ibatis.apache.org/mapping" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

	<alias>
		<typeAlias alias="U_UserInfo" type="TMM.Model.U_UserInfo,TMM.Models" />
	</alias>

	<statements>

		<select id="GetCount"  parameterClass="map" resultClass="System.Int32">
			SELECT count(*) FROM [U_UserInfo]
			<dynamic prepend="WHERE">
				<isPropertyAvailable property="NickName" prepend="AND">
					[NickName] = #NickName#
				</isPropertyAvailable>
				<isPropertyAvailable property="Email" prepend="AND">
					[Email] = #Email#
				</isPropertyAvailable>
				<isPropertyAvailable property="Password" prepend="AND">
					[Password] = #Password#
				</isPropertyAvailable>
				<isPropertyAvailable property="TrueName" prepend="AND">
					[TrueName] = #TrueName#
				</isPropertyAvailable>
				<isPropertyAvailable property="Sex" prepend="AND">
					[Sex] = #Sex#
				</isPropertyAvailable>
				<isPropertyAvailable property="Birthday" prepend="AND">
					[Birthday] = #Birthday#
				</isPropertyAvailable>
				<isPropertyAvailable property="JobTitle" prepend="AND">
					[JobTitle] = #JobTitle#
				</isPropertyAvailable>
				<isPropertyAvailable property="CompanyType" prepend="AND">
					[CompanyType] = #CompanyType#
				</isPropertyAvailable>
				<isPropertyAvailable property="Major" prepend="AND">
					[Major] = #Major#
				</isPropertyAvailable>
				<isPropertyAvailable property="RegTime" prepend="AND">
					[RegTime] = #RegTime#
				</isPropertyAvailable>
				<isPropertyAvailable property="RegIp" prepend="AND">
					[RegIp] = #RegIp#
				</isPropertyAvailable>
				<isPropertyAvailable property="HeadIcon" prepend="AND">
					[HeadIcon] = #HeadIcon#
				</isPropertyAvailable>
				<isPropertyAvailable property="IsStop" prepend="AND">
					[IsStop] = #IsStop#
				</isPropertyAvailable>
				<isPropertyAvailable property="UserIds" prepend="AND">
					[UserId] in(<iterate property="UserIds" conjunction=",">#UserIds[]#</iterate>)
				</isPropertyAvailable>
			</dynamic>
		</select>
		

		<select id="GetList" parameterClass="map" resultClass="U_UserInfo">
			SELECT
				[UserId]
				, [NickName]
				, [Email]
				, [Password]
				, [TrueName]
				, [Sex]
				, [Birthday]
				, [JobTitle]
				, [CompanyType]
				, [Major]
				, [RegTime]
				, [RegIp]
				, [HeadIcon]
				, [IsStop]
        , [UploadCount]
        , [IsMajia]
 FROM 
			(SELECT
			<isPropertyAvailable property="Top" prepend="">
				Top (#Top#)
			</isPropertyAvailable>
			<isPropertyAvailable property="OrderBy" prepend="">
				ROW_NUMBER() OVER (order by $OrderBy$) as RowNumber,
			</isPropertyAvailable>
			*
			FROM [U_UserInfo]
			<dynamic prepend="WHERE">
				<isPropertyAvailable property="NickName" prepend="AND">
					[NickName] = #NickName#
				</isPropertyAvailable>
				<isPropertyAvailable property="Email" prepend="AND">
					[Email] = #Email#
				</isPropertyAvailable>
				<isPropertyAvailable property="Password" prepend="AND">
					[Password] = #Password#
				</isPropertyAvailable>
				<isPropertyAvailable property="TrueName" prepend="AND">
					[TrueName] = #TrueName#
				</isPropertyAvailable>
				<isPropertyAvailable property="Sex" prepend="AND">
					[Sex] = #Sex#
				</isPropertyAvailable>
				<isPropertyAvailable property="Birthday" prepend="AND">
					[Birthday] = #Birthday#
				</isPropertyAvailable>
				<isPropertyAvailable property="JobTitle" prepend="AND">
					[JobTitle] = #JobTitle#
				</isPropertyAvailable>
				<isPropertyAvailable property="CompanyType" prepend="AND">
					[CompanyType] = #CompanyType#
				</isPropertyAvailable>
				<isPropertyAvailable property="Major" prepend="AND">
					[Major] = #Major#
				</isPropertyAvailable>
				<isPropertyAvailable property="RegTime" prepend="AND">
					[RegTime] = #RegTime#
				</isPropertyAvailable>
				<isPropertyAvailable property="RegIp" prepend="AND">
					[RegIp] = #RegIp#
				</isPropertyAvailable>
				<isPropertyAvailable property="HeadIcon" prepend="AND">
					[HeadIcon] = #HeadIcon#
				</isPropertyAvailable>
				<isPropertyAvailable property="IsStop" prepend="AND">
					[IsStop] = #IsStop#
				</isPropertyAvailable>
        <isPropertyAvailable property="IsMajia" prepend="AND">
          [IsMajia] = #IsMajia#
        </isPropertyAvailable>
        <isPropertyAvailable property="RegFrom" prepend="AND">
          [RegFrom] = #RegFrom#
        </isPropertyAvailable>
        <isPropertyAvailable property="OpenId" prepend="AND">
          [OpenId] = #OpenId#
        </isPropertyAvailable>
				<isPropertyAvailable property="UserIds" prepend="AND">
					[UserId] in(<iterate property="UserIds" conjunction=",">#UserIds[]#</iterate>)
				</isPropertyAvailable>
			</dynamic>
			) t
			<dynamic prepend="WHERE">
				<isPropertyAvailable property="StartRecord" prepend="AND">
				RowNumber>#StartRecord#
				</isPropertyAvailable>
			</dynamic>
		</select>
		
		<select id="Get" parameterClass="Int32" resultClass="U_UserInfo">
      SELECT
      [UserId]
      , [NickName]
      , [Email]
      , [Password]
      , [TrueName]
      , [Sex]
      , [Birthday]
      , [JobTitle]
      , [CompanyType]
      , [Major]
      , [RegTime]
      , [RegIp]
      , [HeadIcon]
      , [IsStop]
      , [UploadCount]
      , [IsMajia]
      FROM [U_UserInfo]
      WHERE
      ([UserId] = #UserId#)
    </select>
		
		

		
		<insert id="Insert" parameterClass="U_UserInfo" resultClass="Int32">
      INSERT INTO [U_UserInfo] (
      [NickName]
      , [Email]
      , [Password]
      , [TrueName]
      , [Sex]
      , [Birthday]
      , [JobTitle]
      , [CompanyType]
      , [Major]
      , [RegTime]
      , [RegIp]
      , [HeadIcon]
      , [IsStop]
      , [UploadCount]
      , [IsMajia]
      , [RegFrom]
      , [OpenId]
      ) VALUES (
      #NickName#
      , #Email#
      , #Password#
      , #TrueName#
      , #Sex#
      , #Birthday#
      , #JobTitle#
      , #CompanyType#
      , #Major#
      , #RegTime#
      , #RegIp#
      , #HeadIcon#
      , #IsStop#
      , #UploadCount#
      , #IsMajia#
      , #RegFrom#
      , #OpenId#
      )

      SELECT @@IDENTITY
    </insert>

		<update id="Update" parameterClass="U_UserInfo" resultClass="Int32">
      UPDATE [U_UserInfo] SET
      [NickName] = #NickName#
      , [Email] = #Email#
      , [Password] = #Password#
      , [TrueName] = #TrueName#
      , [Sex] = #Sex#
      , [Birthday] = #Birthday#
      , [JobTitle] = #JobTitle#
      , [CompanyType] = #CompanyType#
      , [Major] = #Major#
      , [RegTime] = #RegTime#
      , [RegIp] = #RegIp#
      , [HeadIcon] = #HeadIcon#
      , [IsStop] = #IsStop#
      , [UploadCount] = #UploadCount#
      , [IsMajia] = #IsMajia#
      WHERE
      ([UserId] = #UserId#)

      SELECT @@rowcount
    </update>

		<delete id="Delete" parameterClass="int32" resultClass="Int32">
			DELETE FROM [U_UserInfo]
			WHERE
				([UserId] = #UserId#)
				
			select @@rowcount
		</delete>

		<update id="UpdateMj" parameterClass="map" resultClass="Int32">
			UPDATE [U_UserInfo] SET			
			[IsMajia] = #IsMajia#
			WHERE
			([UserId] = #UserId#)

			SELECT @@rowcount
		</update>

		<update id="UpdateUploadCount" parameterClass="map" resultClass="Int32">
			UPDATE [U_UserInfo] SET			
			[UploadCount] = #UploadCount#			
			WHERE
			([UserId] = #UserId#)

			SELECT @@rowcount
		</update>
		
	</statements>
</sqlMap>
